<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--[if IE 6]><html lang="en" class="ielt7  ielt8  ielt9 ielt10 en"><![endif]-->
<!--[if IE 7]><html lang="en" class="ie7  ielt8  ielt9 ielt10 en"><![endif]-->
<!--[if IE 8 ]><html lang="en" class="ie8 ielt9 ielt10 en"><![endif]-->
<!--[if IE 9 ]><html lang="en" class="ie9 ielt10 en"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class=" en"><!--<![endif]-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>分支管理策略</title>
<link rel="stylesheet" href="../css/index.css" />
<link rel="stylesheet" href="../css/howgit.css" />
<link rel="stylesheet" href="../css/global.css" />
<script>
	
</script>
</head>
<body>
	<div class="content">
		<div class="main">
			<div class="index-nav">
				<ul class="clear">
					<li>
						<a href="javascript:;" target="_blank">首页</a>
					</li>
					<li>
						<a href="javascript:;" target="_blank">JS分享</a>
					</li>
					<li>
						<a href="javascript:;" target="_blank">css分享</a>
					</li>
					<li class="on">
						<a href="howgit_cp1.html">Git分享</a>
					</li>
					<li>
						<a href="javascript:;" target="_blank">重构那点事</a>
					</li>
				</ul>
			</div>
			<div class="git_main clear">
				<div class="git_right">
					<div class="content_right">
						<h1>分支管理策略</h1>
						<div class="text retract">
							<div class="separate">
								<p>
									通常，合并分支时，如果可能，Git会用Fast forward模式，但这种模式下，删除分支后，会丢掉分支信息。
								</p>
								<p>
									如果要强制禁用Fast forward模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。
								</p>
								<p>
									下面我们实战一下--no-ff方式的git merge：
								</p>
								<p>
									首先，仍然创建并切换dev分支：
								</p>
								<div class="example">
									<p>
										$ git checkout -b dev
									</p>
									<p class="no_retract gycol">
										修改br.txt文件，并提交一个新的commit：
									</p>
									<p>
										$ git add br.txt
									</p>
									<p>
										$ git commit –m “add merge”
									</p>
									<p class="no_retract gycol">
										现在，我们切换回master：
									</p>
									<p>
										$ git checkout master
									</p>
									<p class="no_retract gycol">
										准备合并dev分支，请注意--no-ff参数，表示禁用Fast forward：
									</p>
									<p>
										$ git merge --no-ff -m "merge with no-ff" dev
									</p>
									<p class="no_retract gycol">
										因为本次合并要创建一个新的commit，所以加上-m参数，把commit描述写进去。
									</p>
									<p class="no_retract gycol">
										合并后，我们用git log看看分支历史：
									</p>
									<p>
										$ git log --graph --pretty=oneline --abbrev-commit
									</p>
									<img src="../img/png/gitpics/git52.png" alt="" />
									<p class="no_retract gycol">
										可以看到，不使用Fast forward模式，merge后就像这样：
									</p>
									<img src="../img/png/gitpics/git53.png" alt="" />
									<h2>分支策略</h2>
									<p class="gycol">
										在实际开发中，我们应该按照几个基本原则进行分支管理：
									</p>
									<p>
										1，首先，master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；
									</p>
									<p>
										2，那在哪干活呢？干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；
									</p>
									<p>
										3，你和你的小伙伴们每个人都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。
									</p>
									<p>
										4，所以，团队合作的分支看起来就像这样：
									</p>
									<img src="../img/png/gitpics/git54.png" alt="" />
								</div>
								<div class="sum">
									<h3>小结：</h3>
									<p>
										Git分支十分强大，在团队开发中应该充分应用。
									</p>
									<p>
										合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="git_left">
					<div class="nav_list">
						<ul>
							<li>
								<a href="howgit_cp1.html">Git简介</a>
							</li>
							<li>
								<a href="howgit_cp2.html">Git的安装</a>
							</li>
							<li>
								<a href="howgit_cp3.html">创建版本库</a>
							</li>
							<li>
								<a href="howgit_cp4.html">添加文件</a>
							</li>
							<li>
								<a href="howgit_cp5.html">修改文件</a>
							</li>
							<li>
								<a href="howgit_cp6.html">版本回退</a>
							</li>
							<li>
								<a href="howgit_cp7.html">工作区和暂存区</a>
							</li>
							<li>
								<a href="howgit_cp8.html">管理修改</a>
							</li>
							<li>
								<a href="howgit_cp9.html">撤销修改</a>
							</li>
							<li>
								<a href="howgit_cp10.html">删除文件</a>
							</li>
							<li>
								<a href="howgit_cp11.html">远程仓库</a>
							</li>
							<li>
								<a href="howgit_cp12.html">添加远程仓库</a>
							</li>
							<li>
								<a href="howgit_cp13.html">分支管理</a>
							</li>
							<li>
								<a href="howgit_cp14.html">创建与合并分支</a>
							</li>
							<li>
								<a href="howgit_cp15.html">解决冲突</a>
							</li>
							<li class="on">
								<a href="howgit_cp16.html">分支管理策略</a>
							</li>
							<li>
								<a href="howgit_cp17.html">Bug分支</a>
							</li>
							<li>
								<a href="howgit_cp18.html">Feature分支</a>
							</li>
							<li>
								<a href="howgit_cp19.html">多人协作</a>
							</li>
							<li>
								<a href="howgit_cp20.html">标签管理</a>
							</li>
							<li>
								<a href="howgit_cp21.html">使用GitHub</a>
							</li>
							<li>
								<a href="howgit_cp22.html">忽略特殊文件</a>
							</li>
							<li>
								<a href="howgit_cp23.html">配置别名</a>
							</li>
							<li>
								<a href="howgit_cp24.html">总结</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
